var ComicBoard={title:undefined,init:function(){if(navigator.onLine){ComicBoard.getComics();ComicBoard.getComicBook()}else{ComicBoard.goOffline()}},getComics:function(){$("#character").keypress(function(e){if(e.keyCode==13){e.preventDefault();$(".submit").click()}});$(".submit").click(function(){var e=$("#character").val();$.ajax({type:"POST",url:"Calls/MarvelRequest.php",data:{character:e},success:function(e){if(typeof Storage!=="undefined"){sessionStorage.setItem("marvel",e);e=JSON.parse(e)}if(e.data["results"].length===0){var t=document.getElementById("content");t.innerHTML="";var n=document.createElement("p");n.textContent="Your search didn't match anything, please do another search";t.appendChild(n)}for(var r=0;r<e.data["results"].length;r++){ComicBoard.renderCharacters(e.data["results"][r].name)}},error:function(){ComicBoard.noData()}})})},getInformation:function(){$.ajax({type:"GET",url:"Calls/WikiRequest.php",data:{title:ComicBoard.title},headers:{"Api-User-Agent":""},success:function(e){e=JSON.parse(e);var t=document.getElementById("content");t.innerHTML="";if(e.query.pageids!=undefined){var n=e.query.pageids[0];if(n<0){var r=document.createElement("p");r.textContent="Missing information";t.appendChild(r)}else{var i=e.query.pages[n]["revisions"][0]["*"];$("#content").append(i);if(document.getElementsByClassName("redirectText").length!==0){var s=document.getElementsByClassName("redirectText")[0].textContent;if(s!=""){ComicBoard.title=s;ComicBoard.getInformation()}}}}},error:function(){ComicBoard.noData()}})},noData:function(){var e=document.getElementById("content");e.innerHTML="";var t=document.createElement("p");t.textContent="Unfortunately there is no data to show";e.appendChild(t)},renderCharacters:function(e){var t=document.getElementById("list");var n=document.createElement("a");var r=document.createElement("li");n.textContent=e;n.href="#"+e;n.id=e;r.appendChild(n);t.appendChild(r)},getComicBook:function(){$("#list").on("click",function(e){ComicBoard.title=e.target.id;ComicBoard.getInformation()})},goOffline:function(){if(sessionStorage&&sessionStorage.getItem("marvel")){var e=sessionStorage.getItem("marvel");e=JSON.parse(e);for(var t=0;t<e.data["results"].length;t++){ComicBoard.renderCharacters(e.data["results"][t].name)}var n=document.getElementById("content");var r=document.createElement("p");r.textContent="You seem to be offline, please connect to internet to experience the application";n.appendChild(r)}else{var n=document.getElementById("content");var r=document.createElement("p");r.textContent="You seem to be offline, please connect to internet to experience the application";n.appendChild(r)}}};window.addEventListener("load",ComicBoard.init)